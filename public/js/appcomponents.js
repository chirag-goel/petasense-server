!function(){function t(t,e,r,n,a){r.html5Mode(!1),t.otherwise("/"),e.state("home",{url:"/",templateUrl:"app/home/home.view.tpl.html",controller:"HomeController",controllerAs:"home"}).state("vibrations",{url:"/vibrations",templateUrl:"app/vibrations/vibrations.view.tpl.html",controller:"VibrationsController",controllerAs:"vibrations",resolve:{login:["$in",function(t){return{}}]}}),n.interceptors.push("authInterceptor"),n.defaults.withCredentials=!0}function e(t,e,r){return{request:function(t){return t.headers=t.headers||{},t},response:function(t){return t},responseError:function(t){return 404===t.status?(r.path("/"),e.reject(t)):e.reject(t)}}}function r(t,e){}angular.module("boilerplate",["ui.router","ngLodash"]).config(t),t.$inject=["$urlRouterProvider","$stateProvider","$locationProvider","$httpProvider","$compileProvider"],angular.module("boilerplate").factory("authInterceptor",e),e.$inject=["$rootScope","$q","$location"],angular.module("boilerplate").run(r),r.$inject=["$rootScope","$location"]}(),function(){angular.module("boilerplate").constant("CONSTANTS",{API_URL:"/"})}(),function(){"use strict";function t(t,e){function r(t){this.id=t}return r.build=function(t){return new r(t.id)},r.buildCollection=function(t){return angular.isArray(t)?t.map(r.build):[]},r.apiResponseTransformer=function(t){return angular.isArray(t)?t.map(r.build):r.build(t)},r}angular.module("boilerplate").factory("Vibration",["$window","$rootScope",t])}(),function(){"use strict";function t(t){return{login:function(){return t.remote().Auth.login().then(function(){})}}}angular.module("boilerplate").factory("AuthLocalService",["$in",t])}(),function(){"use strict";function t(t){return{logger:function(t){return console.log(t)},formatAndSortedDataForLineGraph:function(t){return t.trend_data.data.map(function(e,r){return{value:t.trend_data.data[r],date:new Date(t.trend_data.time[r]).getTime()}}).sort(function(t,e){return t.date-e.date})},getVibrationData:function(e){return t.remote().Vibration.getVibrationData(e)}}}angular.module("boilerplate").factory("VibrationLocalService",["$in",t])}(),function(){"use strict";function t(t,e,r,n){function a(r,a,o,i){var l=e.defer(),c={method:r,url:n.API_URL+a,params:o,data:i};return t(c).then(function(t){t.config||console.log("Server error occured."),l.resolve(t)},function(t){l.reject(t)}),l.promise}return{post:function(t,e,r){return a("POST",t,e,r)},get:function(t,e){return a("GET",t,e)}}}angular.module("boilerplate").factory("ApiRemoteService",["$http","$q","$in","CONSTANTS",t])}(),function(){"use strict";function t(t,e,r,n){return{login:function(){var t="common/json/login.json",e={},n={username:"test@petasense.com",password:"pYEMZU3ggJj9u7XD"};return r.remote().API.post(t,e,n).then(function(t){})}}}angular.module("boilerplate").factory("AuthRemoteService",["$http","$q","$in","CONSTANTS",t])}(),function(){"use strict";function t(t,e,r,n){return{getVibrationData:function(t){var e="common/json/"+t+".json",n={axis:t};return r.remote().API.get(e,n).then(function(t){return t.data})}}}angular.module("boilerplate").factory("VibrationRemoteService",["$http","$q","$in","CONSTANTS",t])}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"common/directives/main-nav/main-nav.html"};return t}angular.module("boilerplate").directive("mainNav",t)}(),function(){"use strict";function t(){var t=["$scope","$in",function(t,e){function r(t){console.log(d3.mouse(this));var e=p.invert(d3.mouse(this)[0]),r=s(t,e,1),n=t[r-1],a=t[r],o=e-n.date>a.date-e?a:n;S.attr("transform","translate("+p(o.date)+","+f(o.value)+")"),S.select("text").text(function(){return o.value+", "+new Date(o.date).toDateString()}),S.select(".x-hover-line").attr("y2",c-f(o.value)),S.select(".y-hover-line").attr("x2",l+l)}function n(t,e){$.append("svg:path").datum(t).attr("class","line line-"+e+" color-"+e).attr("d",m).on("mouseover",function(t){S.style("display",null)}).on("mouseout",function(){d3.selectAll(".line").style("opacity",1),S.style("display","none")}).on("mousemove",r)}function a(){v.select(".x.axis").call(x),v.select(".y.axis").call(y),v.select(".x.grid").call(h().tickSize(-c,0,0).tickFormat("")),v.select(".y.grid").call(b().tickSize(-l,0,0).tickFormat("")),t.tabs.forEach(function(t){v.select(".line-"+t.axis).attr("class","line line-"+t.axis+" color-"+t.axis).attr("d",m)})}function o(){var t=parseInt(d3.select("#chart").style("width"))-i.left-i.right,e=parseInt(d3.select("#chart").style("height"))-i.top-i.bottom;p.range([0,t]),f.range([e,0]),d3.select("#chart svg").attr("width",t+i.left+i.right),v.select(".x.axis").attr("transform","translate(0,"+e+")").call(p),v.select(".y.axis").call(f)}t.tabs.forEach(function(t){e.local().Vibration.getVibrationData(t.axis).then(function(r){r=e.local().Vibration.formatAndSortedDataForLineGraph(r),n(r,t.axis)})});var i={top:20,right:20,bottom:20,left:45},l=window.innerWidth-140-i.left-i.right,c=250-i.top-i.bottom,s=d3.bisector(function(t){return t.date}).left,u=new Date,d=new Date;d.setFullYear(d.getFullYear()-1);var p=d3.time.scale().domain([d,u]).range([0,l]),f=d3.scale.linear().domain([0,1]).range([c,0]),m=d3.svg.line().interpolate("basis").x(function(t){return p(t.date)}).y(function(t){return f(t.value)}),g=d3.behavior.zoom().x(p).on("zoom",a),v=d3.select("#chart").append("svg:svg").attr("width",l+i.left+i.right).attr("height",c+i.top+i.bottom).append("svg:g").attr("transform","translate("+i.left+","+i.top+")").call(g);v.append("svg:rect").attr("width",l).attr("height",c).attr("class","plot");var h=function(){return d3.svg.axis().scale(p).orient("bottom").ticks(5)},b=function(){return d3.svg.axis().scale(f).orient("left").ticks(5)},x=d3.svg.axis().scale(p).orient("bottom").ticks(5);v.append("svg:g").attr("class","x axis").attr("transform","translate(0, "+c+")").call(x);var y=d3.svg.axis().scale(f).orient("left").ticks(5);v.append("g").attr("class","y axis").call(y),v.append("g").attr("class","x grid").attr("transform","translate(0,"+c+")").call(h().tickSize(-c,0,0).tickFormat("")),v.append("g").attr("class","y grid").call(b().tickSize(-l,0,0).tickFormat(""));var $=(v.append("svg:clipPath").attr("id","clip").append("svg:rect").attr("x",0).attr("y",0).attr("width",l).attr("height",c),v.append("g").attr("clip-path","url(#clip)")),S=v.append("g").attr("class","focus").style("display","none");S.append("line").attr("class","x-hover-line hover-line").attr("y1",0).attr("y2",c),S.append("line").attr("class","y-hover-line hover-line").attr("x1",l).attr("x2",l),S.append("circle").attr("r",7.5),S.append("text").attr("x",15).attr("dy",".31em").attr("class","tool-tip"),d3.select(window).on("resize",o),o()}],e={restrict:"AE",templateUrl:"common/directives/line-graph/line-graph.html",scope:{tabs:"=?"},controller:t};return e}angular.module("boilerplate").directive("lineGraph",t)}(),function(){"use strict";function t(){var t={restrict:"E",templateUrl:"common/directives/responsive-nav/responsive-nav.html",link:function(t,e,r,n){e.on("click",function(t){$(".responsive-wrapper").slideToggle(150,"swing"),t.preventDefault()})}};return t}angular.module("boilerplate").directive("responsiveNav",t)}();